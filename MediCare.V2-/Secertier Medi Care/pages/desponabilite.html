<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta nom="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestion des Disponibilités - Dashboard Secrétaire</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<script>

    if (localStorage.getItem("theme") === "dark") {
    document.documentElement.classList.add("dark");
  }
    tailwind.config = { darkMode: 'class' }

    function toggleDarkMode() {
  document.documentElement.classList.toggle("dark");

  if (document.documentElement.classList.contains("dark")) {
    localStorage.setItem("theme", "dark");
  } else {
    localStorage.setItem("theme", "light");
  }
}


    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        sidebar.classList.toggle('-translate-x-full');
        overlay.classList.toggle('hidden');
    }
</script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">

<div class="flex h-screen">
    <!-- Mobile sidebar overlay -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-10 md:hidden hidden" onclick="toggleSidebar()"></div>

    <button onclick="toggleSidebar()" class="md:hidden text-gray-500 dark:text-gray-400 mr-4 ml-4 top-0 mt-2 right-0  fixed">
        <i class="fas fa-bars text-xl"></i>
    </button>

    <!-- Sidebar -->
    <div id="sidebar" class="w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 md:translate-x-0 -translate-x-full fixed md:relative z-20 h-full">
        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
            <h1 class="text-xl font-bold text-blue-600 dark:text-blue-400">Dashboard Admin</h1>
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Secrétaire (admin)</p>
        </div>
        <nav class="mt-6">
            <div class="px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-700">
                <a href="dashboard.html" class="flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                    <span>Tableau de bord</span>
                </a>
            </div>
            <div class="px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-700">
                <a href="med.html" class="flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-user-md w-5 mr-3"></i>
                    <span>Médecins</span>
                </a>
            </div>
            <div class="px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-700">
                <a href="specialiti.html" class="flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-calendar-alt w-5 mr-3"></i>
                    <span>Spécialités</span>
                </a>
            </div>
            <div class="px-6 py-3 bg-blue-50 dark:bg-gray-700 border-r-4 border-blue-500">
                <a href="desponabilite.html" class="flex items-center text-blue-600 dark:text-blue-400">
                    <i class="fas fa-users w-5 mr-3"></i>
                    <span>Disponibilités</span>
                </a>
            </div>
            <div class="px-6 py-3 hover:bg-gray-100 dark:hover:bg-gray-700">
                <a href="appointemt.html" class="flex items-center text-gray-700 dark:text-gray-300">
                    <i class="fas fa-file-medical w-5 mr-3"></i>
                    <span>Rendez-vous</span>
                </a>
            </div>
        </nav>
        <div class="absolute bottom-0 w-full p-6 border-t border-gray-200 dark:border-gray-700">
            <div class="flex items-center justify-between mb-4">
                <span class="text-gray-700 dark:text-gray-300">Mode Sombre</span>
                <button onclick="toggleDarkMode()" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-300 dark:bg-gray-600 transition-colors">
                    <span class="inline-block h-4 w-4 transform bg-white rounded-full transition-transform translate-x-1 dark:translate-x-6"></span>
                </button>
            </div>
            <button id="desconectBtn" class="flex items-center text-red-500 w-full py-2 px-4 rounded-lg hover:bg-red-50 dark:hover:bg-gray-700 transition-colors">
                <i class="fas fa-sign-out-alt w-5 mr-3"></i>
                <span>Déconnexion</span>
            </button>
        </div>
    </div>

    <!-- Main content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center py-4 px-4 md:px-8">
                <div class="md:ml-4">
                    <h1 class="text-xl font-bold text-gray-900 dark:text-white">Gestion des Disponibilités</h1>
                    <p class="text-gray-600 dark:text-gray-400">Sélectionnez les jours disponibles pour chaque médecin</p>
                </div>
            </div>
        </header>

        <main class="flex overflow-y-auto p-4 md:p-8">
            <div class="flex-1 overflow-y-auto p-4 md:p-8 bg-white dark:bg-gray-800 rounded-lg shadow border-2 border-blue-500">
                <h3 class="text-xl font-bold text-gray-900 dark:text-gray-400 mb-4">Sélectionner un médecin</h3>
                <select id="selectDoc" class="border-2 rounded p-2 mb-6 w-full">
                    <option value="">Choisir le médecin</option>
                </select>

                <h3 class="text-lg font-semibold mb-2 dark:text-gray-400">Jours de disponibilité</h3>
                <div id="joursCheckboxe" class="grid grid-cols-2 gap-2 mb-4 dark:text-gray-400">
                    <label><input type="checkbox" value="Lundi" class="mr-2 dark:text-gray-400">Lundi</label>
                    <label><input type="checkbox" value="Mardi" class="mr-2">Mardi</label>
                    <label><input type="checkbox" value="Mercredi" class="mr-2">Mercredi</label>
                    <label><input type="checkbox" value="Jeudi" class="mr-2">Jeudi</label>
                    <label><input type="checkbox" value="Vendredi" class="mr-2">Vendredi</label>
                    <label><input type="checkbox" value="Samedi" class="mr-2">Samedi</label>
                    <label><input type="checkbox" value="Dimanche" class="mr-2">Dimanche</label>
                </div>

                <button id="saveBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-800">Enregistrer</button>
                <div id="message" class="mt-2 text-green-600"></div>
            </div>
        </main>
    </div>
</div>

<script>

    const DesBtn = document.getElementById("desconectBtn");
        DesBtn.addEventListener('click', function desconectF(){
            window.location.href = 'login.html'
        })
 
        if(sessionStorage.getItem("isLoggedIn")  !=="true"){
            window.location.href = "login.html";
        }


const doctors = [
    { id: 1, nom: 'badr', special: 'heart', days: [] },
    { id: 2, nom: 'ali', special: 'dentiste', days: [] },
    { id: 3, nom: 'ahmed', special: 'children', days: [] },
    { id: 4, nom: 'muslim', special: 'legs', days: [] },
    { id: 5, nom: 'karim', special: 'head', days: [] }
];

if (!localStorage.getItem("doctors info")) {
    localStorage.setItem("doctors info", JSON.stringify(doctors));
}

let Doctors = JSON.parse(localStorage.getItem("doctors info"));
const select = document.getElementById("selectDoc");
const checkboxes = document.querySelectorAll('#joursCheckboxe input[type="checkbox"]');

// Populate doctors
Doctors.forEach(doc => {
    const option = document.createElement("option");
    option.value = doc.id;
    option.textContent = doc.nom;
    select.appendChild(option);
});

// On change doctor
select.addEventListener("change", () => {
    const selectedId = parseInt(select.value);
    const selectDoc = Doctors.find(d => d.id === selectedId);

    checkboxes.forEach(cb => cb.checked = false);

    if (selectDoc) {
        selectDoc.days.forEach(day => {
            const cb = Array.from(checkboxes).find(c => c.value === day);
            if (cb) cb.checked = true;
        });
    }
});

// Save availability
document.getElementById("saveBtn").addEventListener("click", () => {
    const selectedId = parseInt(select.value);
    if (!selectedId) { alert("Choisir un médecin !"); return; }

    const selectDoc = Doctors.find(d => d.id === selectedId);
    const checkedDays = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value);
    selectDoc.days = checkedDays;

    localStorage.setItem("doctors info", JSON.stringify(Doctors));
    document.getElementById("message").textContent = "Disponibilités sauvegardées !";
});
</script>

</body>
</html>
